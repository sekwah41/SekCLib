<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<title data-rh="true">@Sync Annotation | Sekwah41&#x27;s Core Library</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sekclib.sekwah.com//docs/sync"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="@Sync Annotation | Sekwah41&#x27;s Core Library"><meta data-rh="true" name="description" content="Info on the @Sync Annotation and how to use it"><meta data-rh="true" property="og:description" content="Info on the @Sync Annotation and how to use it"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sekclib.sekwah.com//docs/sync"><link data-rh="true" rel="alternate" href="https://sekclib.sekwah.com//docs/sync" hreflang="en"><link data-rh="true" rel="alternate" href="https://sekclib.sekwah.com//docs/sync" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3814d7d7.css">
<link rel="preload" href="/assets/js/runtime~main.d5d3008c.js" as="script">
<link rel="preload" href="/assets/js/main.6935aeb3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sekclib.png" alt="SekC Lib Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/sekclib.png" alt="SekC Lib Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">SekC Lib</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sekwah41/SekCLib" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/setup">Adding the library to your mod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/sync">@Sync Annotation</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/sync">@Sync Annotation</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="sync-annotation">@Sync Annotation</h1><p>This allows for the automatic syncing of data from the server to the client for entity capabilities.</p><p>If there is demand we will also be looking into supporting other capability types if requested.</p><p>The main interfaces will be kept the same though we will be optimising and improving the underlying code.
This should not require any changes to your mod code though we will release major version bumps if it does make any incompatible changes.
We will also announce on our <a href="https://discord.sekwah.com/">Discord</a> server if there are any major changes.</p><h2 id="registering-a-capability-for-syncing">Registering a Capability for Syncing</h2><p>To register a capability for syncing you will need to listen to the <code>RegisterCapabilitySyncEvent</code> on the <code>MOD</code> event bus.</p><p><a href="https://github.com/sekwah41/Naruto-Mod/blob/2a87ced2daa10cf9eaf3c1f2e480a2ea5ddedd3d/src/main/java/com/sekwah/narutomod/NarutoMod.java#L91-L93">Example Code</a></p><pre><code class="language-java">@Mod.EventBusSubscriber(modid = NarutoMod.MOD_ID, bus = Mod.EventBusSubscriber.Bus.MOD)
public class NarutoSyncTrackers {
    @SubscribeEvent
    public static void registerCapabilitySync(RegisterCapabilitySyncEvent event) {
        /*
         * You do not need to use the same resource location as the capability though it makes it easier to keep track of
         * Provide the capability reference you would pass to .getCapability and the class that implements it.
         * This is the one you plan to use the @Sync annotations in.
         */
        event.registerPlayerCap(new ResourceLocation(NarutoMod.MOD_ID, &quot;ninja_data&quot;), NinjaCapabilityHandler.NINJA_DATA, NinjaData.class);
    }
}
</code></pre><h2 id="sync-attributes">@Sync Attributes</h2><p>You can further customise the way that the <a href="https://github.com/sekwah41/SekCLib/blob/master/src/main/java/com/sekwah/sekclib/capabilitysync/capabilitysync/annotation/Sync.java">@Sync</a> annotation works by adding attributes to the annotation.
For the most part the names should be relatively self-explanatory.</p><h3 id="int-minticks">int minTicks</h3><p>Default: 3</p><p>This is the minimum number of ticks between syncs.
This is to prevent syncing too often, a good example would be large visual changes which could be abused to cause epilepsy or generally would be visually unpleasant.</p><h3 id="boolean-syncglobally">boolean syncGlobally</h3><p>If the data being synced should be available to all players.
This is useful for data needed for visual changes or other info that all players may need to know for your other features.
If this is false, the values will never be changes from their default values unless the capability is attached to their player.</p><p>A good example where you may not want to globally sync is if you are syncing a player&#x27;s energy/mana.
This will avoid third party mods being able to retrieve that data and create extra feedback as well as unnecessary packets to all surrounding players if you are syncing a large object.</p><p>If the capability you are syncing only ever attached to entities, then you will need this to be set to true otherwise no data will ever be sent to a client. If you do not want this then leave the @Sync annotation off as it won&#x27;t do anything.</p><h2 id="registering-custom-sync-types">Registering Custom @Sync Types</h2><p>If you want to sync a type we do not currently support please raise a PR on <a href="https://github.com/sekwah41/SekCLib">Github</a> so we can officially support it.
Though if you plan to sync a custom type you can do so by registering it with the <code>RegisterSyncTrackerTypeEvent</code> event.
You will also need to make a custom class so that the mod knows how to add and retrieve the data from the <code>FriendlyByteBuf</code>.</p><h3 id="registering-example"><a href="https://github.com/sekwah41/Naruto-Mod/blob/2a87ced2daa10cf9eaf3c1f2e480a2ea5ddedd3d/src/main/java/com/sekwah/narutomod/trackers/NarutoSyncTrackers.java">Registering Example</a></h3><pre><code class="language-java">@Mod.EventBusSubscriber(modid = NarutoMod.MOD_ID, bus = Mod.EventBusSubscriber.Bus.MOD)
public class NarutoSyncTrackers {
    @SubscribeEvent
    public static void registerSyncTrackerEvent(RegisterSyncTrackerTypeEvent event) {
        event.registerSyncTracker(ToggleAbilityData.class, new ToggleAbilityDataSyncTracker());
        event.registerSyncTracker(DoubleJumpData.class, new DoubleJumpDataSyncTracker());
    }
}
</code></pre><h3 id="basic-example-of-synctrackerserializer">Basic Example of SyncTrackerSerializer</h3><pre><code class="language-java">public class ResourceLocationSyncTracker implements SyncTrackerSerializer&lt;ResourceLocation&gt; {

    @Override
    public void encode(ResourceLocation objectToSend, FriendlyByteBuf outBuffer) {
        outBuffer.writeUtf(objectToSend.toString());
    }

    @Override
    public ResourceLocation decode(FriendlyByteBuf inBuffer) {
        return new ResourceLocation(inBuffer.readUtf());
    }
}
</code></pre><h3 id="synctrackerclone">SyncTrackerClone</h3><p>This is used to clone the data when copies of the last sent data are being used.
Without this the library would not be able to tell if the data has changed as it would be using a reference to compare to the original.</p><p>Example of a <code>SyncTrackerSerializer</code> &amp; <code>SyncTrackerClone</code> implementation</p><pre><code class="language-java">public class ToggleAbilityDataSyncTracker implements SyncTrackerSerializer&lt;ToggleAbilityData&gt;, SyncTrackerClone&lt;ToggleAbilityData&gt; {

    @Override
    public void encode(ToggleAbilityData objectToSend, FriendlyByteBuf outBuffer) {
        outBuffer.writeInt(objectToSend.getAbilitiesHashSet().size());
        for (ResourceLocation ability : objectToSend.getAbilitiesHashSet()) {
            outBuffer.writeUtf(ability.toString());
        }
    }

    @Override
    public ToggleAbilityData decode(FriendlyByteBuf inBuffer) {
        final int size = inBuffer.readInt();
        ToggleAbilityData data = new ToggleAbilityData(size);
        for(int i = 0; i &lt; size; i++) {
            data.getAbilitiesHashSet().add(new ResourceLocation(inBuffer.readUtf()));
        }
        return data;
    }

    @Override
    public ToggleAbilityData clone(ToggleAbilityData data) {
        ToggleAbilityData cloned = new ToggleAbilityData(data.getAbilitiesHashSet().size());
        cloned.getAbilitiesHashSet().addAll(data.getAbilitiesHashSet());
        return cloned;
    }
}
</code></pre><h3 id="synctrackerupdater">SyncTrackerUpdater</h3><p>For some objects you may not want to replace the object every time to keep references to other objects you have created. While we do not currently have an example though the interface for
<a href="https://github.com/sekwah41/SekCLib/blob/master/src/main/java/com/sekwah/sekclib/capabilitysync/capabilitysync/tracker/SyncTrackerUpdater.java">SyncTrackerUpdater</a>
should be pretty self-explanatory.</p><p>You likely will not need to use this though it is there just in case.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/sekwah41/SekCLib/edit/master/docs/docs/sync.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/contributing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Contributing</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#registering-a-capability-for-syncing" class="table-of-contents__link toc-highlight">Registering a Capability for Syncing</a></li><li><a href="#sync-attributes" class="table-of-contents__link toc-highlight">@Sync Attributes</a><ul><li><a href="#int-minticks" class="table-of-contents__link toc-highlight">int minTicks</a></li><li><a href="#boolean-syncglobally" class="table-of-contents__link toc-highlight">boolean syncGlobally</a></li></ul></li><li><a href="#registering-custom-sync-types" class="table-of-contents__link toc-highlight">Registering Custom @Sync Types</a><ul><li><a href="#registering-example" class="table-of-contents__link toc-highlight">Registering Example</a></li><li><a href="#basic-example-of-synctrackerserializer" class="table-of-contents__link toc-highlight">Basic Example of SyncTrackerSerializer</a></li><li><a href="#synctrackerclone" class="table-of-contents__link toc-highlight">SyncTrackerClone</a></li><li><a href="#synctrackerupdater" class="table-of-contents__link toc-highlight">SyncTrackerUpdater</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Downloads</div><ul class="footer__items"><li class="footer__item"><a href="https://www.curseforge.com/minecraft/mc-mods/sekclib" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CurseForge<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/sekwah41/SekCLib/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.sekwah.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/sekwah" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/sekwah41/SekCLib/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Changelog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/sekwah41/SekCLib" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Source Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Sekwah.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d5d3008c.js"></script>
<script src="/assets/js/main.6935aeb3.js"></script>
</body>
</html>